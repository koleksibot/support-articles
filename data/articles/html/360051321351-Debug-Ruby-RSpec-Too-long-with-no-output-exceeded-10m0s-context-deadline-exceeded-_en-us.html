<p>When a test times out in CircleCI with no output, it can be difficult<br>The following method can be used to obtain a stack trace at a defined interval during RSpec tests:<br><br>First, add the code snippet listed as directed in this <a href="https://github.com/rspec/rspec-rails/issues/1353#issuecomment-93173691" target="_blank" rel="noopener">Github Issues comment</a></p>
<p>Then add this `run` step, just above your rspec tests</p>
<pre>- run:<br>    background: true<br>    command: |<br>      while true ; do<br>        sleep 15<br>        num=$(ps a | grep rspec | grep -v grep | awk '{print $1}')<br>        echo "Process num: $num"<br>        echo "Sending signal"<br>        kill -USR1 ${num} || true<br>    done</pre>
<p>This will send the signal to display the stack trace and allow additional visibility into the test progress<strong>.</strong></p>
<p><strong>Note:Â </strong>Because this job will send repeated stack traces, if the job hangs it <strong>may not stop after 10 minutes. </strong>If you make use of this technique, please be sure to monitor the build in progress.<br>If you need to run the job multiple times and cannot monitor it, consider making use of a tool such as the <a href="https://circleci.com/developer/orbs/orb/fernfernfern/stopthatjob" target="_self">fernfernfern/stopthatjob</a> Orb to stop the entire job after a specified amount of time. Otherwise, the job could potentially run for 5 hours before stopping</p>