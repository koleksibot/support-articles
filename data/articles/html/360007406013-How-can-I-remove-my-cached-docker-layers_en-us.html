<p>Running <strong><span class="s1">docker images --no-trunc --format '{{.ID}}' | xargs docker rmi</span></strong><span class="s1"> or <strong>docker volume prune -f </strong>will delete all of the images and their layers from the volume connected to your job.</span></p>
<p><span class="s1">Because of <a href="https://circleci.com/docs/2.0/docker-layer-caching/#how-dlc-works" target="_blank" rel="noopener">how DLC works</a> you might need to leave this command in your config and run several jobs to remove the DLC layers from all volumes associated with your project.</span></p>
<p><span class="s1">Alternatively, you can use the config below to run a very short job that consumes all 50 DLC volumes and purges docker caches. You can push it to a feature branch without disrupting your main branches:</span></p>
<pre style="background-color: #f3f3f3;"><span class="s1"><span class="na"><span class="hljs-attr">version</span></span><span class="pi"><span class="hljs-attr">:</span></span><span> </span><span class="m"><span class="hljs-number">2<br></span></span><span> </span><span class="na"><span class="hljs-attr">jobs</span></span><span class="pi"><span class="hljs-attr">:</span></span><span> </span><span class="hljs-attr"> <br></span><span class="na"><span class="hljs-attr">  docker-purge</span></span><span class="pi"><span class="hljs-attr">:</span></span><span class="na"><span class="hljs-attr"><br>    docker</span></span><span class="pi"><span class="hljs-attr">:</span></span><span> </span><span class="hljs-attr"> <br></span><span class="pi"><span class="hljs-attr">      -</span></span><span class="hljs-attr"> </span><span class="na"><span class="hljs-attr">image</span></span><span class="pi"><span class="hljs-attr">:</span></span><span> cimg/<span class="hljs-keyword">base</span>:<span class="hljs-number">2020.01</span></span><span class="hljs-string"> </span><span class="hljs-attr"> <br></span><span class="na"><span class="hljs-attr">    parallelism</span></span><span class="pi"><span class="hljs-attr">:</span></span><span> 50</span><span class="m"><span class="hljs-number"><br>    steps:<br>      - setup_remote_docker<br>      - run: docker volume prune -f</span></span></span></pre>
<p> </p>
<p><span class="s1">If you're running into issues where stale volume caches are causing problems often, then consider using our new <a href="https://circleci.com/orbs/registry/orb/cci-x/docker-registry-image-cache" target="_blank" rel="noopener">docker registry image cache orb</a> as a substitute. It's more suitable for projects that have high concurrency throughput, or jobs that use parallelism due to the limited number of volumes available.<br><br>If you notice errors always happen on the same volume, which you can see by checking the "spin up environment" step or "remote docker" please <a href="https://support.circleci.com/hc/en-us/requests/new?ticket_form_id=855268" target="_self">contact support </a></span></p>