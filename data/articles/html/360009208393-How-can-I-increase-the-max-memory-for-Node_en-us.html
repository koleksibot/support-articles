<p>Node has a default max memory usage of less than 2GB on some 64bit systems. This can cause unexpected memory issues when running on CircleCI. It's possible to adjust the max memory ceiling using a command line flag passed into node:</p>
<p><code>--max-old-space-size=&lt;memory in MB&gt;</code></p>
<p> </p>
<p>The flag can be difficult to ensure is being used. Especially when node processes are forked. The best way to ensure this setting will be picked up by all node processes within the environment is to apply this setting directly to an environment variable, which can be done using Node. 8 or higher<br><br></p>
<p><code>NODE_OPTIONS=--max-old-space-size=4096</code></p>
<p> </p>
<p><em><strong>Note</strong>: If you have specified <code>export NODE_OPTIONS=&lt;value&gt;</code> in your <code>package.json</code>, it'll override what you set in the <code>NODE_OPTIONS</code> environment variable in the <code>config.yml</code> (either at the container, job, or step respective level)</em></p>
<p> </p>
<p><strong>Further Reading:</strong></p>
<p><a href="https://futurestud.io/tutorials/node-js-increase-the-memory-limit-for-your-process">https://futurestud.io/tutorials/node-js-increase-the-memory-limit-for-your-process</a></p>
<p><a href="https://stackoverflow.com/questions/48387040/nodejs-recommended-max-old-space-size/48392705">https://stackoverflow.com/questions/48387040/nodejs-recommended-max-old-space-size/48392705</a></p>